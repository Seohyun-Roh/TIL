## 2.10. if와 '?'를 사용한 조건 처리

- 조건에 따라 다른 행동을 할 때-> if문, 조건부 연산자(물음표 연산자)인 `?`을 사용.
- if(...): 괄호 안의 조건이 참이면 실행. 실행되는 구문이 한 줄이더라도 중괄호 `{}`를 이용해 감싸주는 게 코드 가독성에 좋음.
- if문은 괄호 안의 표현식을 평가하고 그 결과를 불린값으로 변환. 0, "", null, undefined, NaN -> false. 이외 값은 true.

- 조건부 연산자 '?': 조건에 따라 다른 값을 변수에 할당해줄 때. if문을 쓸 수도 있지만 `?`쓰면 더 간결하게 가능. 피연산자가 3개이기 때문에 삼항(ternary) 연산자라고도 함. 자바스크립트에서 피연산자를 3개 받는 연산자는 조건부 연산자가 유일함.
- `let accessAllowed = (age > 18) ? true : false;`
- ? 왼쪽의 조건이 참이라면 첫번째 값, 거짓이면 두번째 값이 반환. 물음표 연산자의 우선순위 낮기 때문에 괄호 안써줘도 상관없지만 가독성을 위해 써주는 것이 좋음. 위의 코드의 경우 비교 연산자 자체가 true, false를 반환하기 때문에 굳이 물음표 연산자 안써도 됨.

```js
let message =
  age < 3
    ? "아기야 안녕?"
    : age < 18
    ? "안녕!"
    : age < 100
    ? "환영합니다!"
    : "나이가 아주 많으시거나, 나이가 아닌 값을 입력 하셨군요!";
```

- 첫 번째 물음표에서 age<3을 검사하고 참이면 값 반환, 거짓이면 첫번째 콜론 `:`에 이어지는 조건문 age<18 검사하는 식.

- 평가 결과를 변수에 할당하지 않고, 평가 결과에 따라 실행되는 표현식이 달라지도록 할 때 물음표 연산자를 쓰는 것은 좋지 않음. 가독성 떨어지기 때문. 물음표 연산자는 `조건에 따라 반환 값을 다르게 할 때`만 쓰고 여러 분기를 만들 때는 if문 쓰기.

## 2.11. 논리 연산자

- '논리' 연산자라고 하지만 피연산자로 불린형뿐만 아니라 모든 타입의 값을 받을 수 있음. 연산 결과도 모든 타입이 될 수 있음.
- ||(OR) -> 이항 연산자. 둘다 false일 때만 false. 피연산자가 불린형이 아니면 평가를 위해 불린형으로 변환됨. if문에서 자주 사용됨.
- 자바스크립트에서만 제공하는 논리연산자 OR의 추가기능->truthy를 찾음. 가장 왼쪽 피연산자부터 오른쪽으로 피연산자 평가. 각 피연산자를 불린형으로 변환, 그 값이 true이면 연산을 멈추고 해당 피연산자의 원래값을 반환(불린형으로 반환 전). 피연산자를 모두 평가한 경우(모두 false인 경우) 마지막 피연산자를 반환. => `||`를 여러 개 체이닝하면 첫 번째로 나오는 truthy를 반환. truthy가 하나도 없다면 마지막 피연산자 반환.
- 위와 같이 OR는 왼쪽부터 오른쪽으로 평가를 하다가 truthy를 만나면 나머지 값들을 건들지 않고 평가 멈춤 -> 단락 평가(short circuit evaluation). 이는 두 번째 피연산자가 변수 할당과 같은 부수적인 효과를 가지는 표현식일 때 명확히 볼 수 있음. `true || alert("not printed")`

- &&(AND) -> 두 피연산자가 모두 참일 때만 true. `1 && 0` <- 숫자형이지만 논리형으로 바뀌어 true && false가 됨.
- OR가 첫번째 truthy를 반환하는 것과 달리 AND는 첫번째 falsy를 반환. 모두 truthy이면 마지막 피연산자 반환.
- &&가 ||보다 우선순위 높음. a && b || c && d 와 (a && b) || (c && d)는 동일하게 동작.
- `if`를 &&나 ||로 대체하지 말자. &&를 사용한 코드가 더 짧지만 if 조건문이 필요할 경우 if를 쓰자.

- NOT(!) -> NOT 연산자는 인수를 하나만 받음. 피연산자를 불린형으로 변환 후 그 값의 역을 반환. 따라서 느낌표를 두개쓰면 값을 불린형으로 바꿀 수 있음(역을 두번). NOT 연산자의 우선순위가 모든 논리 연산자 중 높기 때문에 가장 먼저 실행됨.

- `alert(1) || 2 || alert(3)`의 경우 첫 번째 OR이 왼쪽 피연산자인 alert(1)평가. 이 때 첫 번째 alert창에 1 출력. 그 후 alert 메서드는 undefined를 반환->or연산자는 다음 피연산자를 평가. 두 번째 피연산자 2는 truthy이기 때문에 반환되고 나머지 평가는 종료. 따라서 세번째 alert(3)은 실행되지 않음. -`alert(1) && alert(2)`의 경우 왼쪽 피연산자를 평가(이 때 1이 alert창에 출력). 얼럿 창이 undefined(falsy한 값)를 반환하기 때문에 평가를 종료. undefined를 반환.
- `null || 2 && 3 || 4`의 경우 AND가 우선순위가 높기 때문에 `null || 3 || 4`로 된 후 or 평가. 최종적으로는 3을 반환.

## 2.12. nullish 병합 연산자 '??'

- `??`을 사용하면 짧은 문법으로 그 값이 확정되어 있는 변수를 찾을 수 있음. `a ?? b`에서 a가 null도 아니고 undefined도 아니면 a, 그 외 b.

```js
let firstName = null;
let lastName = null;
let nickName = "바이올렛";

// null이나 undefined가 아닌 첫 번째 피연산자
alert(firstName ?? lastName ?? nickName ?? "익명의 사용자"); // 바이올렛
```

- `??`와 `||`의 차이-> ||는 첫번째 truthy 값 반환. ??는 첫 번째 정의된(defined)값 반환. 이는 null과 undefined, 숫자 0을 구분 지어 다뤄야 할 때 중요한 역할.

```js
let height = 0;

alert(height || 100); // 100
alert(height ?? 100); // 0
```

- 위의 ||는 0을 falsy한 값으로 취급했기 때문에 100 출력. ??는 0을 defined한 값으로 취급했기 때문에 0 출력. 0이 할당될 수 있는 변수를 사용해 기능을 개발할 땐 ||보다 ??가 적합.

- ??의 우선순위는 꽤 낮음. `=`과 `?`보다는 먼저, 나머지의 대부분의 연산자보다는 나중에 평가. 괄호를 추가해주는 게 좋음.

- 안정성 관련 이슈 때문에 `??`는 `&&`나 `||`와 함께 사용하지 못함. `let x = 1 && 2 ?? 3; // SyntaxError: Unexpected token '??'` 제약을 피하려면 괄호를 사용해주기. `let x = (1 && 2) ?? 3;`
