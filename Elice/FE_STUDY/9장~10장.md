## 목차

- [9장. 타입 변환과 단축 평가](#9장-타입-변환과-단축-평가)

---

# 9장 타입 변환과 단축 평가

## 9.1 타입 변환이란?

- `명시적 타입 변환`, `타입 캐스팅` : 개발자가 의도적으로 값의 타입을 변환하는 것
- `암묵적 타입 변환`, `타입 강제 변환`: 개발자의 의도와 상관없이 암묵적으로 타입이 자동 변환되는 것

### 9.2.1 문자열 타입으로 변환

```js
Symbol() + ''; //-> Uncaught TypeError: Cannot convert a Symbol value to a string

[] + ''; //-> ""
[10, 20] + ''; //-> "10,20"
```

### 9.2.2 숫자 타입으로 변환

산술 연산자, 비교 연산자 사용 시 발생.

```js
+''; //-> 0

+null; //-> 0
+undefined; //-> NaN

+Symbol(); //-> Uncaught TypeError: Cannot convert a Symbol value to a number

+{}; //-> NaN
+[]; //-> 0
+[10, 20]; //-> NaN
```

### 9.2.3 불리언 타입으로 변환

if문이나 for문 같은 제어문, 삼항 조건 연산자의 조건식.  
불리언 타입이 아닌 값을 Truthy 값, Falsy 값으로 구분. Truthy 값은 true로, Falsy 값은 false로 암묵적 타입 변환됨.

**Falsy 값**

- false
- undefined
- null
- 0, -0
- NaN
- ''(빈 문자열)

## 9.3 명시적 타입 변환

1. 표준 빌트인 생성자 함수(String, Number, Boolean)를 new 연산자 없이 호출하는 방법.
2. 빌트인 메서드를 사용하는 방법.
3. 암묵적 타입 변환을 이용하는 방법.

## 9.4 단축 평가

### 9.4.1 논리 연산자를 사용한 단축 평가

논리곱 연산자, 논리합 연산자-> 논리 연산의 결과를 결정하는 피연산자를 타입 변환하지 않고 그래도 반환. (-> 단축 평가)  
`단축 평가`: 표현식을 평가하는 도중에 평가 결과가 확정된 경우 나머지 평가 과정을 생략하는 것.

| 단축 평가 표현식    | 평가 결과 |
| ------------------- | --------- |
| true \|\| anything  | true      |
| false \|\| anything | anything  |
| true && anything    | anything  |
| false && anything   | false     |

**함수 매개변수에 기본값 설정할 때**

```js
// 단축 평가 이용한 매개변수 기본값 설정
function getStringLength(str) {
  str = str || '';
  return str.length;
}

// ES6의 매개변수 기본값 설정
function getStringLength(str = '') {
  return str.length;
}
```

### 9.4.2 옵셔널 체이닝 연산자

ES11(ECMAScript2020)에서 도입. 옵셔널 체이닝 연산자 `?.`은 좌항의 피연산자가 null 또는 undefined인 경우 undefined를 반환, 그렇지 않으면 우항의 프로퍼티 참조를 이어감.

```js
// 논리 연산자 &&
var str = '';

var length = str && str.length;

console.log(length); //-> ''
```

논리 연산자 &&는 좌항 피연산자가 Falsy 값이면 좌항 피연산자를 그대로 반환. 0이나 ''은 객체로 평가될 때도 있음.  
하지만 옵셔널 체이닝 연산자는 좌항 피연산자가 Falsy 값이라도 null이나 undefined가 아니면 우항의 프로퍼티 참조를 이어감.

```js
// 옵셔널 체이닝 연산자
var str = '';

var length = str?.length;

console.log(length); //-> 0
```

### 9.4.3 null 병합 연산자

ES11에서 도입된 null 병합 연산자 `??`는 좌항의 피연산자가 null 또는 undefined인 경우 우항의 피연산자를 반환, 그렇지 않으면 좌항의 피연산자를 반환.  
변수에 기본값을 설정할 때 유용함.

기존에는 ||을 사용한 단축평가를 사용. 이 경우 좌항의 피연산자가 Falsy값이면 우항의 피연산자 반환.  
`??`의 경우 Falsy값이더라도 null 또는 undefined가 아니면 좌항의 피연산자를 그대로 반환.
