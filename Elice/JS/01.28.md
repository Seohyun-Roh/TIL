# 1/28 자바스크립트 동작 원리

## 실행 컨텍스트

- 자바스크립트는 흔히 인터프리터 언어라고 하지만 컴파일 언어의 면모가 있음. 자바스크립트의 컴파일은 여러 단계로 구성되며 각 단계별로 코드를 처리하는 목적이 다름.

### 자바스크립트 함수의 실행

- 어떤 js 코드도 없는 경우 -> this, 변수들(Variable Object), Scope chain이 만들어짐. this는 실행이 이루어지는 환경(브라우저에서는 window).
- 자바스크립트 엔진은 코드가 없어도 실행 환경(실행 컨텍스트)을 초기화. 스코프는 코드가 현재 실행되는 환경, 맥락. this포인터, 스코프에 저장된 변수들, 스코프 체인 등이 환경에 포함. 글로벌 스코프에서 this는 window를 가리킴.
- 객체 안에서 this값은 객체를 가리킴. 함수는 X

### 실행 컨텍스트(Execution context)

- 실행 컨텍스트(실행 맥락)는 자바스크립트 코드가 실행되는 환경. 코드에서 참조하는 변수, 객체(함수 포함), this 등에 대한 레퍼런스가 있음. 전역에서 시작해 함수가 호출될 때 스택에 쌓이게 됨.
- 자바스크립트가 처음 실행될 때 전역 실행 컨텍스트가 만들어지고, 함수가 실행될 때 함수 실행 컨텍스트가 만들어짐.

### this가 가리키는 것

- 함수가 호출되는 상황 -> 함수 직접 호출, 객체의 메서드 호출, 생성자 함수 호출, 간접 호출(call, apply 등. call, apply는 Function 객체의 메서드).
- 그 외 콜백 함수의 호출이 있음. 이는 보통 다른 함수의 인자로 보내지는 함수이고, 특정 동작 이후 불려지는 함수.
- `new` 를 붙이면 생성자 호출. 새로운 객체가 리턴됨.
- `bind는 특정 this 변수에 해당되는 객체를 메서드에 묶어주는 함수. 간접 호출. function 객체의 메서드
- 함수의 호출 환경에 따라 this는 동적으로 세팅. this가 환경에 따라 바뀌는 것을 동적 바인딩(dynamic binding)이라 하고 bind, apply, call 등으로 this가 가리키는 것을 조작할 수 있음.

### 화살표 함수와 일반 함수의 this

- 화살표 함수의 this -> 호출된 함수를 둘러싼 실행 컨텍스트. 일반 함수의 this -> 새롭게 생성된 실행 컨텍스트를 가리킴.
- 화살표 함수의 this는 bind나 다른 작업을 해줘도 바꿀 수 없음. setTimeout 등 this가 바뀌는 상황에서 유용함.

### 자바스크립트 Closure

- 함수: 일급 객체(함수를 변수처럼 다룰 수 있음.)
- 클로저는 함수의 일급 객체 성질을 이용. 함수와 함수가 사용하는 변수들을 저장한 공간을 클로저라고 함.

### ES6 Rest, Spread Operator

- Rest Operator: 함수의 인자, 배열, 객체 중 나머지 값을 묶어 사용하도록 함. 인자가 없어도 rest operator는 빈 배열을 반환함.
- Spread Operator: 묶인 배열, 객체를 펼쳐서 각각의 필드로 변환.
